const stops = {
    "id": "40552884-L_PA_2023-23_LG_VA-Sem-Vac-12",
    "service_id": "L_PA_2023-23_LG_VA-Sem-Vac-12",
    "route_id": "L0175-21204",
    "stop_times": [
        {
            "arrival_time": 50700,
            "stop": {
                "stop_id": "LORdtec*",
                "stop_code": null,
                "stop_name": "OREYE Dépôt TEC",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.351165",
                "stop_lat": "50.728232",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 50700,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 1,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 50760,
            "stop": {
                "stop_id": "LORgend2",
                "stop_code": null,
                "stop_name": "OREYE Gendarmerie",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.355437",
                "stop_lat": "50.728564",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 50760,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 2,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 50760,
            "stop": {
                "stop_id": "LOReg--2",
                "stop_code": null,
                "stop_name": "OREYE Eglise",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.356808",
                "stop_lat": "50.728608",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 50760,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 3,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 50760,
            "stop": {
                "stop_id": "LORmont2",
                "stop_code": null,
                "stop_name": "OREYE Thier du Mont",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.359925",
                "stop_lat": "50.729613",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 50760,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 4,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 50820,
            "stop": {
                "stop_id": "LORcomb2",
                "stop_code": null,
                "stop_name": "OREYE Rue des Combattants",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.36697",
                "stop_lat": "50.731006",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 50820,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 5,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 50880,
            "stop": {
                "stop_id": "LOrchau2",
                "stop_code": null,
                "stop_name": "OTRANGE Château",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.373583",
                "stop_lat": "50.733497",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 50880,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 6,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 50940,
            "stop": {
                "stop_id": "LOrpont2",
                "stop_code": null,
                "stop_name": "OTRANGE Pont",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.378291",
                "stop_lat": "50.732881",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 50940,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 7,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51060,
            "stop": {
                "stop_id": "LTyhall2",
                "stop_code": null,
                "stop_name": "THYS Hallettes",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.385869",
                "stop_lat": "50.72503",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51060,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 8,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51060,
            "stop": {
                "stop_id": "LTywaut2",
                "stop_code": null,
                "stop_name": "THYS Rue J. Wauters",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.388436",
                "stop_lat": "50.723378",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51060,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 9,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51060,
            "stop": {
                "stop_id": "LTywyna2",
                "stop_code": null,
                "stop_name": "THYS Rue Wynants",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.390781",
                "stop_lat": "50.722347",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51060,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 10,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51120,
            "stop": {
                "stop_id": "LTymahr2",
                "stop_code": null,
                "stop_name": "THYS Rue Mahré",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.394508",
                "stop_lat": "50.720197",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51120,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 11,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51180,
            "stop": {
                "stop_id": "LCRchpl2",
                "stop_code": null,
                "stop_name": "CRISNEE Chapelle",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.397118",
                "stop_lat": "50.717747",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51180,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 12,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51240,
            "stop": {
                "stop_id": "LCRabbe2",
                "stop_code": null,
                "stop_name": "CRISNEE Rue Abbé Coopmans",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.401614",
                "stop_lat": "50.714633",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51240,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 13,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51300,
            "stop": {
                "stop_id": "LOdcris2",
                "stop_code": null,
                "stop_name": "ODEUR Chemin de Crisnée",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.414282",
                "stop_lat": "50.709449",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51300,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 14,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51360,
            "stop": {
                "stop_id": "LOdmonu2",
                "stop_code": null,
                "stop_name": "ODEUR Monument",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5140",
                "stop_url": null,
                "stop_lon": "5.416156",
                "stop_lat": "50.707005",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51360,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 15,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51480,
            "stop": {
                "stop_id": "LVlleme4",
                "stop_code": null,
                "stop_name": "VILLERS-L'EVEQUE Rue G. Lemeer",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.43467",
                "stop_lat": "50.702254",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51480,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 16,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51540,
            "stop": {
                "stop_id": "LVlroua4",
                "stop_code": null,
                "stop_name": "VILLERS-L'EVEQUE Rue Petit Roua",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.439723",
                "stop_lat": "50.701571",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51540,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 17,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51540,
            "stop": {
                "stop_id": "LVleg--6",
                "stop_code": null,
                "stop_name": "VILLERS-L'EVEQUE Eglise",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.440544",
                "stop_lat": "50.704036",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51540,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 18,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51600,
            "stop": {
                "stop_id": "LVltige2",
                "stop_code": null,
                "stop_name": "VILLERS-L'EVEQUE Tige",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.446222",
                "stop_lat": "50.702513",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51600,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 19,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51660,
            "stop": {
                "stop_id": "LVllieg2",
                "stop_code": null,
                "stop_name": "VILLERS-L'EVEQUE Rue de Liège",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.451758",
                "stop_lat": "50.704207",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51660,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 20,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51720,
            "stop": {
                "stop_id": "LVlplan2",
                "stop_code": null,
                "stop_name": "VILLERS-L'EVEQUE Rue du Plantin 5",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.45541",
                "stop_lat": "50.70717",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51720,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 21,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51780,
            "stop": {
                "stop_id": "LOTdelv2",
                "stop_code": null,
                "stop_name": "OTHEE Rue Delvaux 21",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.461415",
                "stop_lat": "50.711104",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51780,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 22,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51840,
            "stop": {
                "stop_id": "LOTcarr2",
                "stop_code": null,
                "stop_name": "OTHEE Carrefour",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.466019",
                "stop_lat": "50.713992",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51840,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 23,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51900,
            "stop": {
                "stop_id": "LOTawan2",
                "stop_code": null,
                "stop_name": "OTHEE Rue d'Awans",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.468083",
                "stop_lat": "50.710732",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51900,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 24,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 51900,
            "stop": {
                "stop_id": "LOTcloe2",
                "stop_code": null,
                "stop_name": "OTHEE Café Cloes",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.470455",
                "stop_lat": "50.708167",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 51900,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 25,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52020,
            "stop": {
                "stop_id": "LXhvina2",
                "stop_code": null,
                "stop_name": "XHENDREMAEL Haut Vinâve",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.476796",
                "stop_lat": "50.702212",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52020,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 26,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52080,
            "stop": {
                "stop_id": "LXhvanh2",
                "stop_code": null,
                "stop_name": "XHENDREMAEL Place Vanhove",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.480444",
                "stop_lat": "50.703761",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52080,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 27,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52140,
            "stop": {
                "stop_id": "LXhhaka2",
                "stop_code": null,
                "stop_name": "XHENDREMAEL Hahet Kaket",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.485835",
                "stop_lat": "50.702349",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52140,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 28,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52140,
            "stop": {
                "stop_id": "LXhmara2",
                "stop_code": null,
                "stop_name": "XHENDREMAEL Rue du Marais",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.488593",
                "stop_lat": "50.70239",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52140,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 29,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52200,
            "stop": {
                "stop_id": "LXhcite2",
                "stop_code": null,
                "stop_name": "XHENDREMAEL Cité du Bourdon",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.49321",
                "stop_lat": "50.700883",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52200,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 30,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52260,
            "stop": {
                "stop_id": "LXhnouv2",
                "stop_code": null,
                "stop_name": "XHENDREMAEL Nouvelle Route",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.486127",
                "stop_lat": "50.698663",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52260,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 31,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52320,
            "stop": {
                "stop_id": "LXhjupr4",
                "stop_code": null,
                "stop_name": "XHENDREMAEL Route de Juprelle",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.482461",
                "stop_lat": "50.697824",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52320,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 32,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52440,
            "stop": {
                "stop_id": "Lalmitt2",
                "stop_code": null,
                "stop_name": "ALLEUR Rue François Mittérand",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.490935",
                "stop_lat": "50.685552",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52440,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 33,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52500,
            "stop": {
                "stop_id": "Lalwaro2",
                "stop_code": null,
                "stop_name": "ALLEUR Château de Waroux",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5130",
                "stop_url": null,
                "stop_lon": "5.495386",
                "stop_lat": "50.683001",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52500,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 34,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52560,
            "stop": {
                "stop_id": "Lalchar2",
                "stop_code": null,
                "stop_name": "ALLEUR Rue des Chardonnerets",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.50192",
                "stop_lat": "50.680537",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52560,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 35,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52620,
            "stop": {
                "stop_id": "Laltrav2",
                "stop_code": null,
                "stop_name": "ALLEUR Traversée des Forts",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.511799",
                "stop_lat": "50.678184",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52620,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 36,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52620,
            "stop": {
                "stop_id": "Lalecmo2",
                "stop_code": null,
                "stop_name": "ALLEUR Ecole Moyenne",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.515208",
                "stop_lat": "50.676624",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52620,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 37,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52680,
            "stop": {
                "stop_id": "Laleg--2",
                "stop_code": null,
                "stop_name": "ALLEUR Eglise",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.512759",
                "stop_lat": "50.67388",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52680,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 38,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52740,
            "stop": {
                "stop_id": "Lancoop2",
                "stop_code": null,
                "stop_name": "ANS Union Coopérative",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.513369",
                "stop_lat": "50.671781",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52740,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 39,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52800,
            "stop": {
                "stop_id": "Lanschu2",
                "stop_code": null,
                "stop_name": "ANS Rue Schuman",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.510003",
                "stop_lat": "50.670107",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52800,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 40,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52860,
            "stop": {
                "stop_id": "Lanadmi2",
                "stop_code": null,
                "stop_name": "ANS Centre Administratif",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.506944",
                "stop_lat": "50.6678",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52860,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 41,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 52980,
            "stop": {
                "stop_id": "Lanstat2",
                "stop_code": null,
                "stop_name": "ANS Rue de la Station",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.510616",
                "stop_lat": "50.664068",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 52980,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 42,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53160,
            "stop": {
                "stop_id": "Lanplat2",
                "stop_code": null,
                "stop_name": "ANS Eglise du Plateau",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.521273",
                "stop_lat": "50.659902",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53160,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 43,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53340,
            "stop": {
                "stop_id": "Lanfran4",
                "stop_code": null,
                "stop_name": "ANS Rue des Français",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.530733",
                "stop_lat": "50.655915",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53340,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 44,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53460,
            "stop": {
                "stop_id": "Lannico2",
                "stop_code": null,
                "stop_name": "ANS Place Nicolaï",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5820",
                "stop_url": null,
                "stop_lon": "5.540179",
                "stop_lat": "50.65248",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53460,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 45,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53580,
            "stop": {
                "stop_id": "Llgchau2",
                "stop_code": null,
                "stop_name": "LIEGE Basse Chaussée",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5810",
                "stop_url": null,
                "stop_lon": "5.548261",
                "stop_lat": "50.649642",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53580,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 46,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53700,
            "stop": {
                "stop_id": "Llgbaro4",
                "stop_code": null,
                "stop_name": "LIEGE Rue H. Baron",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5810",
                "stop_url": null,
                "stop_lon": "5.554",
                "stop_lat": "50.647462",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53700,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 47,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53760,
            "stop": {
                "stop_id": "Llgfont2",
                "stop_code": null,
                "stop_name": "LIEGE Fontainebleau",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5810",
                "stop_url": null,
                "stop_lon": "5.558521",
                "stop_lat": "50.646764",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53760,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 48,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53880,
            "stop": {
                "stop_id": "Llghoch2",
                "stop_code": null,
                "stop_name": "LIEGE Hocheporte",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5810",
                "stop_url": null,
                "stop_lon": "5.565424",
                "stop_lat": "50.647193",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53880,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 49,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 53880,
            "stop": {
                "stop_id": "Llgcadr4",
                "stop_code": null,
                "stop_name": "LIEGE Cadran",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5810",
                "stop_url": null,
                "stop_lon": "5.569066",
                "stop_lat": "50.645933",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 53880,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 50,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        },
        {
            "arrival_time": 54000,
            "stop": {
                "stop_id": "LlgLAMB7",
                "stop_code": null,
                "stop_name": "LIEGE Place St-Lambert",
                "stop_desc": "",
                "location_type": "0",
                "parent_station": null,
                "zone_id": "5810",
                "stop_url": null,
                "stop_lon": "5.573025",
                "stop_lat": "50.645249",
                "stop_timezone": null,
                "wheelchair_boarding": "0",
                "level_id": null,
                "platform_code": null
            },
            "departure_time": 54000,
            "pickup_type": "0",
            "drop_off_type": "0",
            "stop_sequence": 51,
            "stop_headsign": null,
            "continuous_pickup": "1",
            "continuous_drop_off": "1",
            "shape_dist_traveled": null,
            "timepoint": "1"
        }
    ],
    "shape_id": "L01750177",
    "trip_headsign": null,
    "trip_short_name": "23",
    "direction_id": "1",
    "block_id": "7702487",
    "wheelchair_accessible": "0",
    "bikes_allowed": "0",
    "frequencies": []
};

const map = L.map('map').setView([50.728232, 5.351165], 14);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);


const markers = []
for (const stop of stops.stop_times) {
    let t = L.marker([stop.stop.stop_lat, stop.stop.stop_lon]).addTo(map);
    t.bindPopup(stop.stop.stop_name);
    markers.push(t);
}


const icon = L.divIcon({
    className: "my-custom-pin",
    iconAnchor: [0, 24],
    labelAnchor: [-6, 0],
    popupAnchor: [0, -36],
    html: `<span class="bus"/>`
})

let bus = L.marker([0, 0], { icon: icon }).addTo(map);

const girouette = document.getElementById("girouette");

var ws;
const connect = () => {
    if (ws != null) ws.close();

    ws = new WebSocket(`ws://${window.location.hostname}:3000/ws`);
    ws.onmessage = (event) => {
        const data = JSON.parse(event.data);
        bus.setLatLng([data.lat, data.lon]);
        map.flyTo([data.lat, data.lon], 15);

        //lazy way of having direction

        const idx = data.girouette == "[175] 175: OREYE" ? stops.stop_times.length - data.next_idx : data.next_idx;
        for (const marker in markers) {
            const list = markers[marker]._icon.classList;
            if(marker == idx) {
                list.add("huechange");
                continue
            }

            if(list.contains("huechange"))
                list.remove("huechange");

            console.log(marker == idx)
        }

        markers[idx].openPopup();
        girouette.innerText = data.girouette;
    }
    ws.onclose = () => {
        girouette.innerText = "WS Déconnecté...";
        setTimeout(connect, 1000);
    }
    ws.onerror = () => {
        girouette.innerText = "WS Déconnecté...";
        setTimeout(connect, 1000);
    }
}

connect();